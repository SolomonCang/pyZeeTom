# Example tomography parameter file (params_example.tomog)
# Lines are positional. Blank lines and lines starting with # are ignored.
# Units: angles in degrees, velocities km/s, dates in HJD (Heliocentric Julian Date).

#0 inclination  vsini  period  pOmega
# period: rotation period at reference radius r0 (in days)
# pOmega: power-law index for differential rotation, Ω(r) = Ω_ref × (r/r0)^pOmega
#   pOmega = 0.0  : rigid rotation
#   pOmega = -0.5 : Keplerian (solar-type for disk)
#   pOmega = -1.0 : constant angular momentum
60.0  25.0  1.0  -0.05

#1 mass  radius  [Vmax]  [r_out]  [enable_occultation]
# Two modes for grid construction:
#   Mode 1: Set Vmax > 0 (e.g., 300 km/s) → grid uses Vmax directly, ignores radius/r_out
#   Mode 2: Set Vmax = 0 and r_out > 0 → grid computed from radius, r_out, vsini, inclination
# radius: stellar radius (R_sun), also used as reference radius r0 for differential rotation
# r_out: outer disk radius (in units of stellar radius), used if Vmax=0
# enable_occultation: 0=off, 1=on (compute stellar occultation mask for equatorial disk)
0.5  0.5  0.0  2.0  1

#2 nRingsStellarGrid
60

#3 targetForm  targetValue  numIterations   (C=chi^2 target, E=entropy target)
C  1.0  0

#4 test_aim (convergence threshold for Test statistic)
1e-3

#5 lineAmpConst  k_QU  enableV  enableQU
1  1.0  1  1

#6 initTomogFile  initModelPath
# Unified model initialization parameter (new format, replaces legacy #6 and #9)
# initTomogFile: 0=disabled, 1=enabled (read model from .tomog file)
# initModelPath: path to .tomog model file (e.g., output/geomodel_phase0.tomog)
# When enabled:
#   - Model parameters override input params (inclination, pOmega, period, etc.)
#   - If parameter conflicts exist, params_tomog_int.txt is generated in output/
#   - Magnetic field (B_los, B_perp, chi) and brightness from .tomog are loaded
# Note: Legacy initMagFromFile/initBrightFromFile (old #6/#9 lines) are deprecated
1  output/spot_forward/spot_model_phase_0p00.tomog

#7 fitBri  chiScaleI  brightEntScale
0  1.0  1.0

#8 fEntropyBright  defaultBright  maximumBright
1  1.0  2.0

#9 (deprecated - line ignored for backward compatibility)
# Legacy: was initBrightFromFile initBrightFile
# Now merged into #6 initTomogFile
# Kept here as placeholder to maintain line numbering
0

#10 estimateStrenght (legacy line strength fitting flag)
0

#11 spectralResolution  lineParamFile
# spectralResolution: spectrograph resolution (e.g., 65000), will compute FWHM = c/R (km/s)
# lineParamFile: path to line parameters file (format: wl0 sigWl g)
65000  input/lines.txt

#12 velStart  velEnd  obsFileType  specType
# obsFileType: observation file format hint (lsd_i, lsd_pol, spec_i, spec_pol, auto)
# specType: data domain (auto=auto-detect, spec=wavelength domain, lsd=velocity domain)
#   When specType=auto, SpecIO will automatically determine format and domain
-300.0  300.0  spec_pol  specType=spec

#13 jDateRef  (HJD0, reference epoch for phase calculation: phase = (HJD - HJD0) / period)
0.5

#14+ observation entries: filename  HJD  velR  [polchannel]
# polchannel: I/V/Q/U (optional, default=V)
#   I: Intensity only (output spec_i or lsd_i format, 3 columns)
#   V/Q/U: Polarization (output spec_pol or lsd_pol format with specified Stokes component)
# Example for 5 phases over 1 rotation period (0-1 day):
input/inSpec/obs_phase_00.spec  0.20  0.0  I
input/inSpec/obs_phase_01.spec  0.40  0.0  V
input/inSpec/obs_phase_02.spec  0.60  0.0  Q
input/inSpec/obs_phase_03.spec  0.80  0.0  U
input/inSpec/obs_phase_04.spec  1.00  0.0  V
